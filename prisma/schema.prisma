generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

enum Role {
    USER
    SELLER
    ADMIN
}

enum ProductType {
    TEMPLATES
    UIKITS
    ICONS
}

enum Plan {
    basic
    pro
    enterprise
}

model User {
    id        String   @id @default(cuid())
    kindUserId String @unique
    email     String   @unique
    name      String?
    profilePic String?
    StripeId  String?
    onBoarding OnBoarding?
    products  Product[]
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model OnBoarding {
    id        String   @id @default(cuid())
    kindUserId    String @unique
    role      Role    @default(USER)
    city      String
    state     String
    country   String
    zip       String
    user      User      @relation(fields: [kindUserId], references: [kindUserId])
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Product {
    id          String      @id @default(cuid())
    sellerId    String
    name        String
    shortDescription String
    longDescription  String
    price       Float
    productType     ProductType
    thumbnail      Thumbnail[]
    productUrl     String
    seller      User        @relation(fields: [sellerId], references: [kindUserId])
    createdAt   DateTime    @default(now())
    updatedAt   DateTime    @updatedAt
}

model Thumbnail {
    id        String   @id @default(cuid())
    productId String
    url       String
    key       String
    product   Product @relation(fields: [productId], references: [id])
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Subscription {
    id        String   @id @default(cuid())
    kindUserId    String
    plan      Plan
    startDate String?
    endDate   String?
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}
